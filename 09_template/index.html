



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Aplicación Base - Prouecto de Softare - Guías 2020</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#aplicacion-base" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Prouecto de Softare - Guías 2020" aria-label="Prouecto de Softare - Guías 2020" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Prouecto de Softare - Guías 2020
            </span>
            <span class="md-header-nav__topic">
              
                Aplicación Base
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Prouecto de Softare - Guías 2020" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Prouecto de Softare - Guías 2020
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../01_commands/" title="Comandos" class="md-nav__link">
      Comandos
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../02_ssh/" title="Ssh" class="md-nav__link">
      Ssh
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../03_ssh_gitlab/" title="Ssh Gitlab" class="md-nav__link">
      Ssh Gitlab
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../04_instalar_git/" title="Instalar Git" class="md-nav__link">
      Instalar Git
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../05_instalar_python/" title="Instalar Python" class="md-nav__link">
      Instalar Python
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../06_manejo_de_paquetes/" title="Manejo de Paquetes" class="md-nav__link">
      Manejo de Paquetes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../07_entornos_virtuales/" title="Entornos Virtuales" class="md-nav__link">
      Entornos Virtuales
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../08_merge_request/" title="Merge Requests en Gitlab" class="md-nav__link">
      Merge Requests en Gitlab
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Aplicación Base
      </label>
    
    <a href="./" title="Aplicación Base" class="md-nav__link md-nav__link--active">
      Aplicación Base
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#versiones-en-el-server" class="md-nav__link">
    Versiones en el Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    Dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archivos-y-directorios-importantes" class="md-nav__link">
    Archivos y directorios importantes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directorio-raiz" class="md-nav__link">
    Directorio raíz
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    App
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helpers" class="md-nav__link">
    Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    Models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static" class="md-nav__link">
    Static
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#archivo-__init__py" class="md-nav__link">
    Archivo __init__.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion" class="md-nav__link">
    Configuración
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejecucion" class="md-nav__link">
    Ejecución
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#como-usar-el-template" class="md-nav__link">
    ¿Cómo usar el template?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#versiones-en-el-server" class="md-nav__link">
    Versiones en el Server
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dependencias" class="md-nav__link">
    Dependencias
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#archivos-y-directorios-importantes" class="md-nav__link">
    Archivos y directorios importantes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directorio-raiz" class="md-nav__link">
    Directorio raíz
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app" class="md-nav__link">
    App
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helpers" class="md-nav__link">
    Helpers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    Models
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#static" class="md-nav__link">
    Static
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#templates" class="md-nav__link">
    Templates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#archivo-__init__py" class="md-nav__link">
    Archivo __init__.py
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuracion" class="md-nav__link">
    Configuración
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejecucion" class="md-nav__link">
    Ejecución
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#como-usar-el-template" class="md-nav__link">
    ¿Cómo usar el template?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="aplicacion-base">Aplicación Base<a class="headerlink" href="#aplicacion-base" title="Permanent link">&para;</a></h1>
<p>En la siguiente guía se va a explicar sobre la aplicación base brindada por la
cátedra.</p>
<h2 id="versiones-en-el-server">Versiones en el Server<a class="headerlink" href="#versiones-en-el-server" title="Permanent link">&para;</a></h2>
<ul>
<li>Python: 3.6.x</li>
<li>Mysql: 10.1.44-MariaDB</li>
</ul>
<h2 id="dependencias">Dependencias<a class="headerlink" href="#dependencias" title="Permanent link">&para;</a></h2>
<p>Las dependencias del proyecto se encuentran en el archivo <code>requirements.txt</code>:</p>
<ul>
<li>Flask v1.0.2       -&gt; web framework</li>
<li>PyMysql v0.9.2     -&gt; conexión a la base</li>
<li>Flask-Session v0.3 -&gt; sesiones almacenadas en el servidor</li>
</ul>
<p>Cuando vayan agregando nuevas dependencias con el manejador de paquetes de python (pip), es necesario que se vayan agregando en archivo para que luego  sus compañeros/as o en producción puedan instalarse las mismas. Se pueden ingresar editando el archivo y guardándolo <code>'paquete'=='numero de versión'</code> como por ejemplo  <code>Flask==1.0.2</code>. Para más ejemplos revisar el archivo <code>requirements.txt</code> en la aplicación template.</p>
<h2 id="archivos-y-directorios-importantes">Archivos y directorios importantes<a class="headerlink" href="#archivos-y-directorios-importantes" title="Permanent link">&para;</a></h2>
<p>En el raíz de nuestra template van a encontrar los siguientes archivos y
directorios:</p>
<h2 id="directorio-raiz">Directorio raíz<a class="headerlink" href="#directorio-raiz" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code>$ tree -L <span class="m">1</span>
.
├── app              <span class="c1"># directorio principal de código.</span>
├── config.py        <span class="c1"># módulo de configuración de la aplicación.</span>
├── db               <span class="c1"># directorio con dump inicial de la base de datos.</span>
├── README.md
├── requirements.txt <span class="c1"># listado de dependencias.</span>
└── run.py           <span class="c1"># entry point.</span>
</code></pre></div>


<h2 id="app">App<a class="headerlink" href="#app" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code>tree -L <span class="m">2</span>
.
├── app
│   ├── db.py        <span class="c1"># módulo de conexión con la base de datos.</span>
│   ├── helpers      <span class="c1"># directorio con funciones auxiliares.</span>
│   ├── __init__.py  <span class="c1"># módulo principal.</span>
│   ├── models       <span class="c1"># directorio con los modelos (Models).</span>
│   ├── resources    <span class="c1"># directorio de los controladores (Controllers).</span>
│   ├── static       <span class="c1"># directorio de archivos estáticos.</span>
│   └── templates    <span class="c1"># directorio de templates (Views).</span>
├── config.py
├── db
│   └── schema.sql
├── README.md
├── requirements.txt
└── run.py
</code></pre></div>


<h3 id="helpers">Helpers<a class="headerlink" href="#helpers" title="Permanent link">&para;</a></h3>
<p>Es el directorio que tiene funciones auxiliares de la aplicación. Generalmente
aquí se encuentra el código que no son parte principal del negocio de la
aplicación pero que se usan en distintas partes del código.</p>
<p>En este caso se pueden ver funciones para el manejo de los errores dentro del
archivo <code>handler.py</code> y en <code>auth.py</code> tenemos una función para la verificación
de sesión.</p>
<h3 id="models">Models<a class="headerlink" href="#models" title="Permanent link">&para;</a></h3>
<p>Aquí se encuentra el código referido a la lógica de aplicación concreta. En
general son lo modelos que interactúan con la base de datos y realizan lógica de
negocio.</p>
<h3 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h3>
<p>Este directorio tiene los controladores de la aplicación. Los controladores tiene
lógica de la aplicación relacionada con la web. Hace de enlace entre la lógica
de aplicación y la de generación de las vistas. En el subdirectorio <code>/api</code> se
encuentran los controladores que devuelven los recursos en formato <code>json</code>.</p>
<h3 id="static">Static<a class="headerlink" href="#static" title="Permanent link">&para;</a></h3>
<p>Aquí se colocan los archivos estáticos y que queremos que puedan ser accedidos
públicamente en nuestra aplicación, como pueden ser hojas de estilo, scripts js
e imágenes.</p>
<h3 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">&para;</a></h3>
<p>Directorio de los archivos de template de Jinja2. En general se suele crear
un subdirectorio por cada uno de los controladores creados en <code>resources</code>.
Seria como las vistas en el modelo MVC.</p>
<h3 id="archivo-__init__py">Archivo <code>__init__.py</code><a class="headerlink" href="#archivo-__init__py" title="Permanent link">&para;</a></h3>
<p>Este es el archivo principal de la aplicación que la inicializa y la configura.
En las misma se encuentra una función llamada <code>create_app</code> que realiza toda
la configuración:</p>
<ul>
<li>Crea la aplicación <code>flask</code>.</li>
<li>Levanta la configuración desde el módulo <code>config.py</code> según el <code>environment</code>.</li>
<li>Configura las sesiones, la base de datos y el motor de templates.</li>
<li>Configura todas las rutas de la aplicación.</li>
<li>Se registran los manejadores en caso de error.</li>
</ul>
<h2 id="configuracion">Configuración<a class="headerlink" href="#configuracion" title="Permanent link">&para;</a></h2>
<p>El módulo de configuración se encuentra en el archivo <code>config.py</code>. El mismo
contiene una clase para cada uno de los entornos de ejecución de la aplicación o
<code>enviroments</code>.</p>
<p>En la clase <code>DevelopmentConfig</code> se debe configurar los parámetros para la
ejecución local de cada desarrollador. La clase está preparada para que cada
desarrollador agregue en variables de entorno los valores particulares de cada
entorno local.</p>
<p>En <code>ProductionConfig</code> se colocan los valores para ejecutar la aplicación
en el entorno del server remoto. También esta preparada para tomar los valores
de variables de entorno, pero en este caso se <strong>debe agregar como valores por
default los datos que se les otorgaron de la base</strong>. Esto último es muy
importante dado que en el servidor no se encuentran a agregadas las variables
de entorno.</p>
<h2 id="ejecucion">Ejecución<a class="headerlink" href="#ejecucion" title="Permanent link">&para;</a></h2>
<p>La ejecución de la aplicación se realiza desde el archivo <code>run.py</code> que instancia
la aplicación y la ejecuta.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">create_app</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>


<p>Es necesario para la correcta ejecución configurar la variable de entorno
<code>FLASK_ENV</code> que se toma como parámetro para realizar la carga de la
configuración de nuestra aplicación.
Para ejecutar el ambiente local como ambiente de desarrollo la manera seria la siguiente: <code>FLASK_ENV=development python run.py</code> </p>
<h2 id="como-usar-el-template">¿Cómo usar el template?<a class="headerlink" href="#como-usar-el-template" title="Permanent link">&para;</a></h2>
<ul>
<li>Descargar del repositorio el último tag.</li>
<li>Copiar los archivos de la aplicacion template a dentro del respositorio de su proyecto (si tienen visibles los archivos ocultos, no hay que copiar el directorio <code>.git</code>).</li>
<li>Cargar el archivo <code>db/schema.sql</code> en su base de datos local. Para eso pueden utilizar un cliente de base de datos como por ejemplo: <code>phpMyAdmin</code> o <code>mysql workbench</code> o la misma command line de mysql <code>mysql -h "host" -u "user" -p "password" "database" &lt; db/schema.sql</code>. Es importante cargar este archivo sino la aplicacion no funcionara.</li>
<li>Configurar correctamente la clase <code>DevelopmentConfig</code> con los valores del entorno local del proyecto.</li>
<li>Crear un entorno virtual dentro de nuestro proyecto es necesario ejecutar lo siguiente:</li>
</ul>
<div class="codehilite"><pre><span></span><code>virtualenv venv
</code></pre></div>


<ul>
<li>Activar nuestro entorno virtual:</li>
</ul>
<div class="codehilite"><pre><span></span><code>. venv/bin/activate
</code></pre></div>


<ul>
<li>Instalar los paquetes de nuestra aplicación:</li>
</ul>
<div class="codehilite"><pre><span></span><code>pip install -r requirements.txt
</code></pre></div>


<ul>
<li>Para ejecutar la aplicación indicando el entorno:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="nv">FLASK_ENV</span><span class="o">=</span>development python run.py
</code></pre></div>


<div class="codehilite"><pre><span></span><code> * Serving Flask app <span class="s2">&quot;app&quot;</span> <span class="o">(</span>lazy loading<span class="o">)</span>
 * Environment: development
 * Debug mode: on
 * Running on http://127.0.0.1:5000/ <span class="o">(</span>Press CTRL+C to quit<span class="o">)</span>
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: <span class="m">112</span>-188-961
</code></pre></div>


<p>El proyecto queda ejecutandose en el puerto 5000, en un navegador acceder a http://localhost:5000 </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../08_merge_request/" title="Merge Requests en Gitlab" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Merge Requests en Gitlab
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>